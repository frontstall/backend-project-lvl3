var modalOverlay = document.querySelector(".modal-overlay"), modalFeedback = document.querySelector(".modal-feedback"), feedbackForm = document.querySelector(".feedback-form"), modalOpenButton = document.querySelector(".feedback-button"), modalCloseButton = document.querySelector(".modal-close"), feedbackName = document.querySelector("#feedback-name"), feedbackEmail = document.querySelector("#feedback-email"), feedbackMessage = document.querySelector("#feedback-message"), isStorageSupport = !0, storageName = "", storageEmail = ""; try { storageName = localStorage.getItem("feedbackName"), storageEmail = localStorage.getItem("feedbackEmail") } catch (e) { isStorageSupport = !1, console.log("Локальное хранилище не поддерживается") } modalOpenButton.addEventListener("click", function (e) { e.preventDefault(), modalOverlay.classList.add("overlay-show"), modalFeedback.classList.add("modal-show"), storageName && storageEmail ? (feedbackName.value = storageName, feedbackEmail.value = storageEmail, feedbackMessage.focus()) : feedbackName.focus() }), modalFeedback.addEventListener("submit", function (e) { feedbackName.value && feedbackEmail.value && feedbackMessage.value ? isStorageSupport && (localStorage.setItem("feedbackEmail", feedbackEmail.value), localStorage.setItem("feedbackName", feedbackName.value)) : (e.preventDefault(), modalFeedback.classList.remove("modal-shake"), modalFeedback.offsetWidth = modalFeedback.offsetWidth, modalFeedback.classList.add("modal-shake")) }), modalCloseButton.addEventListener("click", function (e) { e.preventDefault(), modalOverlay.classList.remove("overlay-show"), modalFeedback.classList.remove("modal-show"), modalFeedback.classList.remove("modal-shake") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && modalOverlay.classList.contains("overlay-show") && (modalOverlay.classList.remove("overlay-show"), modalFeedback.classList.remove("modal-show"), modalFeedback.classList.remove("modal-shake")) }); for (var sliderControls = document.querySelectorAll(".slider-control"), checkedSliderControl = document.querySelector(".slider-control-current"), slides = document.querySelectorAll(".slide"), visibleSlide = document.querySelector(".slide-visible"), i = 0; i < sliderControls.length; i++)sliderControls[i].addEventListener("click", function (e) { if (e.preventDefault(), !this.classList.contains("slider-control-current")) { checkedSliderControl.classList.remove("slider-control-current"), (checkedSliderControl = this).classList.add("slider-control-current"); for (var a = 0; a < slides.length; a++)sliderControls[a].classList.contains("slider-control-current") && (visibleSlide.classList.remove("slide-visible"), slides[a].classList.add("slide-visible"), visibleSlide = slides[a]) } });
